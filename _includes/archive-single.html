{% include base_path %}

{% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
<article class="pub-compact" itemscope itemtype="http://schema.org/CreativeWork">
  <h3 class="pub-compact__title">
    <a href="{{ base_path }}{{ post.url }}" rel="permalink">{{ title }}</a>
  </h3>

  {% if post.venue %}
  <div class="pub-compact__venue"><i>{{ post.venue }}</i></div>
  {% endif %}

  {% comment %}
    Auteurs : préférer un champ YAML `authors:` (chaîne) dans chaque publication.
    Fallback : `author`, puis première partie de `citation`.
  {% endcomment %}
  {% assign authors_txt = post.authors | default: post.author %}
  {% if authors_txt == nil and post.citation %}
    {% assign authors_txt = post.citation | split: "." | first %}
  {% endif %}
  {% if authors_txt %}
  <div class="pub-compact__authors">{{ authors_txt }}</div>
  {% endif %}
</article>
